{% extends "base.html" %}

{% block content %}
  <div class="row">
    <div class="col-md-8">
      <h1>Hi, {{ current_user.username }}!</h1>
      {% if form %}
      <div class="card mb-4">
        <div class="card-body">
          <form action="" method="post">
            {{ form.hidden_tag() }}
            <div class="mb-3">
              {{ form.post.label(class="form-label") }}
              {{ form.post(class="form-control", rows=3) }}
              {% for error in form.post.errors %}
                <div class="text-danger small">{{ error }}</div>
              {% endfor %}
            </div>
            <button type="submit" class="btn btn-primary">{{ form.submit.label.text }}</button>
          </form>
        </div>
      </div>
      {% endif %}
      {% for post in posts %}
        {% include '_post.html' %}
      {% endfor %}
      <nav aria-label="Post navigation">
        <ul class="pagination justify-content-center mt-4">
          <li class="page-item{% if not prev_url %} disabled{% endif %}">
            <a class="page-link" href="{{ prev_url if prev_url else '#' }}" tabindex="-1">
              <span aria-hidden="true">&larr;</span> Newer posts
            </a>
          </li>
          <li class="page-item{% if not next_url %} disabled{% endif %}">
            <a class="page-link" href="{{ next_url if next_url else '#' }}">
              Older posts <span aria-hidden="true">&rarr;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="col-md-4">
      <!-- Optionally, add a sidebar here -->
    </div>
  </div>
{% endblock %}
